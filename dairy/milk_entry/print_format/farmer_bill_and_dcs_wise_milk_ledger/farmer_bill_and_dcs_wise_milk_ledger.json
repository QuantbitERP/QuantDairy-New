{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2023-04-25 14:40:45.928085",
 "css": ".print-format{\n    margin:0px !important;\n    line-height:8px !important;\n   \n}\n.print-format table{\n    width:100%;\n    border:1px solid;\n    height:0px !important;\n    \n}\n\n\n.print-format th{\n    color:black;\n    padding:2px !important;\n    height:0px !important;\n   \n    \n}\n.print-format td{\n    color:black;\n    padding:2px !important;\n    height:0px !important;\n  \n    \n}\nspan{\n   \n    height:0px !important;\n    padding:2px !important;\n    margin:0px !important;\n}\n @page {\n            size: A6 landscape;\n            margin: 0px !important;\n        }\n",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Purchase Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "{% set a %}{% endset %}\n   {% set c=frappe.db.get_value(\"Bank Account\",{\"party_type\":\"Supplier\",\"party\":doc.supplier},[\"name\"] )%}\n   {% if c %}\n   \n   {% set a=frappe.get_doc(\"Bank Account\",{\"party_type\":\"Supplier\",\"party\":doc.supplier})%}\n   {% endif %}\n   \n \n    <table style=\"width:100%;border:1px solid black;border-bottom:none;\">\n    <tr>\n        <td>\n            {% if letter_head %}\n                {{ letter_head }}\n            {% endif %}\n        </td>\n    </tr>\n    </table>\n     <table style=\"border-bottom:none;\"><tr><th style=\"width:100%;text-align:center;\">\n        <b style=\"font-size:8px;\"> Milk Purchase Bill</b>\n     </th></tr></table> \n    <table style=\"width:100%;\">\n        <tr style=\"width:100%;\">\n       \n           <td style=\"width:60%;\">\n            <b> <span style=\"font-size:8px;\">Payment Period: {{get_purchase(doc.name)[0].posting_date}} to {{get_purchase(doc.name)[-1].posting_date}}</span></b>\n          </td> \n          <td style=\"width:40%;\">\n          <b ><span style=\"font-size:8px;\">Print Date: {{frappe.utils.formatdate(frappe.utils.nowdate(),\"dd-mm-yyyy\")}}</span></b>\n        </td>\n        </tr>\n       \n    </table>\n    \n    <table style=\"width:100%;border:1px solid;border-bottom:none;border-top:none;\">\n        <tr style=\"width:100%;\">\n           <td style=\"width:50%;font-size:8px;\">\n             {% set s %}{% endset %}\n       {% if doc.supplier %}\n       {% set s = frappe.get_doc(\"Supplier\",doc.supplier) %}\n       {% endif %}\n      \n          <span style=\"font-size:8px;\">Code No:</span> \n          {% if doc.supplier %}\n          <span style=\"font-size:8px;\">{{s.name}}</span><br>\n          {% endif %}\n          <span style=\"font-size:8px;\">Bank Name:</span> \n          {% if a.bank %}\n          <span style=\"font-size:8px;\">{{a.bank}}</span>\n          {% endif %}\n          </td> \n          <td style=\"width:50%;font-size:8px;\">\n          <span style=\"font-size:8px;\">Name:</span>\n          {% if doc.supplier %}\n          <span style=\"font-size:8px;\">{{s.supplier_name}}</span><br>\n          {% endif %}\n          <span style=\"font-size:8px;\">Mobile No:</span> \n          <span style=\"font-size:8px;\"></span>\n        </td>\n        </tr>\n       \n    </table>\n    \n    <table style=\"width:100%;border:1px solid black;border-bottom:none;\">\n        <tr>\n           \n            <th style=\"border-left:1px solid;text-align:center;font-size:8px;color:black;\">Date</th>\n            <th style=\"border-left:1px solid;text-align:center;font-size:8px;color:black;\">Shift</th>\n            <th style=\"border-left:1px solid;text-align:center;font-size:8px;color:black;\">Ltr</th>\n            <th style=\"border-left:1px solid;text-align:center;font-size:8px;color:black;\">Fat</th>\n            <th style=\"border-left:1px solid;text-align:center;font-size:8px;color:black;\">SNF</th>\n            <th style=\"border-left:1px solid;text-align:center;font-size:8px;color:black;\">Rate</th>\n            <th style=\"border-left:1px solid;text-align:center;font-size:8px;color:black;\">Amount</th>\n        </tr>\n        {%-for itm in get_purchase(doc.name)-%}\n     \n        <tr style=\"border:1px solid black;\">\n            <td style=\"border-left:1px solid;text-align:center;font-size:8px;\">{{itm.posting_date}}</td>\n            <td style=\"border-left:1px solid;text-align:center;font-size:8px;\">{{itm.shift}}</td>\n            <td style=\"border-left:1px solid;text-align:center;font-size:8px;\">{{itm.ltr}}</td>\n            <td style=\"border-left:1px solid;text-align:center;font-size:8px;\">{{itm.fat}}</td>\n            <td style=\"border-left:1px solid;text-align:center;font-size:8px;\">{{itm.snf}}</td>\n            <td style=\"border-left:1px solid;text-align:center;font-size:8px;\">{{'%0.2f'| format(itm.rate|float)}}</td>\n            <td style=\"border-left:1px solid;text-align:center;font-size:8px;\">{{'%0.2f'| format(itm.rate * itm.ltr|float)}}</td>\n            \n        </tr>\n        {%-endfor-%}\n       \n        <tr style=\"border:1px solid black;\">\n            <td style=\"border-left:1px solid;text-align:left;font-size:8px;\"></td>\n            <td style=\"border-left:1px solid;text-align:center;font-size:8px;\">Total</td>\n            <td style=\"border-left:1px solid;text-align:center;font-size:8px;\">{{doc.total_qty}}</td>\n            <td style=\"border-left:1px solid;text-align:right;font-size:8px;\"></td>\n            <td style=\"border-left:1px solid;text-align:right;font-size:8px;\"></td>\n            <td style=\"border-left:1px solid;text-align:right;font-size:8px;\"></td>\n            <td style=\"border-left:1px solid;text-align:center;font-size:8px;\">\n            {% set var= {'rt': 0} %}\n            {%-for itm in get_purchase(doc.name)-%}\n            {% if var.update({'rt': var.rt + itm.rate * itm.ltr}) %}{% endif %}\n            {%endfor %}\n            {{'%0.2f'| format(var.rt|float)}}</td>\n        </tr>\n        \n    </table>\n    <table style=\"width:100%;border:1px solid;border-bottom:none;border-top:none;\">\n        <tr style=\"width:50%;\">\n           <td style=\"border:1px solid;border-bottom:none;border-top:none;\">\n            <b><span style=\"font-size:8px;text-align:center;\">Pay Amount</span></b>\n          </td> \n          <td style=\"width:50%;\">\n          <b><span style=\"font-size:8px;text-align:center;\">Add Ded/Amount</span></b>\n        </td>\n        </tr>\n       \n    </table>\n    <table style=\"width:100%;border:1px solid;\">\n        <tr style=\"width:100%;\">\n           <td style=\"border:1px solid;\">\n             {% set s %}{% endset %}\n                   {% if doc.supplier %}\n                   {% set s = frappe.get_doc(\"Supplier\",doc.supplier) %}\n       \n              {% set varm = {'ct': 0} %}\n              {%- for i in doc.items -%}\n              {% set r %}{% endset %}\n               {% if i.purchase_receipt %}\n               {% set r = frappe.get_doc(\"Purchase Receipt\",i.purchase_receipt) %}\n        \n               {% endif %}\n                    {%set a=frappe.get_doc(\"Milk Entry\",r.milk_entry)%}\n                    {% if s.commission_type != 'Bonus'%}\n                        {% if varm.update({'ct': varm.ct + a.incentive}) %}{% endif %}\n                    {% endif %}\n\n        {%- endfor -%}\n        {% endif %}\n          <span style=\"font-size:8px;\">Commission Head:{{'%0.2f'| format(varm.ct|float)}}</span><br>\n         \n          \n          </td> \n          <td style=\"width:50%;\">\n                {% set s %}{% endset %}\n                   {% if doc.supplier %}\n                   {% set s = frappe.get_doc(\"Supplier\",doc.supplier) %}\n       \n              {% set vars = {'jcase': 0} %}\n              {%- for i in doc.items -%}\n              {% set r %}{% endset %}\n               {% if i.purchase_receipt %}\n               {% set r = frappe.get_doc(\"Purchase Receipt\",i.purchase_receipt) %}\n        \n               {% endif %}\n                    {%set a=frappe.get_doc(\"Milk Entry\",r.milk_entry)%}\n                    {% if s.commission_type == 'Bonus' %}\n                        {% if vars.update({'jcase': vars.jcase + a.incentive}) %}{% endif %}\n                    {% endif %}\n\n        {%- endfor -%}\n        {% endif %}\n              \n          <span style=\"font-size:8px;\">Bonus Amount:{{'%0.2f'| format(vars.jcase|float)}}</span>\n         \n        </td>\n        </tr>\n       \n    </table>\n    <table style=\"width:100%;border:1px solid;border-top:none;\">\n        <tr style=\"width:100%;font-size:8px;\">\n           <td style=\"width:50%;\">\n            <b> <span style=\"font-size:8px;\">Total Amount: {{doc.get_formatted('rounded_total')}}</span></b>\n          </td> \n         \n        <td style=\"width:50%;font-size:8px;\">\n            {% set s %}{% endset %}\n                   {% if doc.supplier %}\n                   {% set s = frappe.get_doc(\"Supplier\",doc.supplier) %}\n             {% set vars = {'jcase': 0} %}\n             {% set varm = {'ct': 0} %}\n            \n              {%- for i in doc.items -%}\n              {% set r %}{% endset %}\n               {% if i.purchase_receipt %}\n               {% set r = frappe.get_doc(\"Purchase Receipt\",i.purchase_receipt) %}\n        \n               {% endif %}\n                    {%set a=frappe.get_doc(\"Milk Entry\",r.milk_entry)%}\n                    {% if s.commission_type == 'Bonus'%}\n                        {% if vars.update({'jcase': vars.jcase + a.incentive}) %}{% endif %}\n                    {% endif %}\n                     {% if s.commission_type != 'Bonus'%}\n                        {% if varm.update({'ct': varm.ct + a.incentive}) %}{% endif %}\n                    {% endif %}\n\n        {%- endfor -%}\n              \n             \n\n        {% set vark= {'rt': 0} %}\n            {%-for itm in get_purchase(doc.name)-%}\n            {% if vark.update({'rt': vark.rt + itm.rate * itm.ltr}) %}{% endif %}\n            {%endfor %}\n            {% if s.commission_type == 'Bonus'%}\n                {% set final = (vark.rt + vars.jcase)%}\n            {% endif %}\n            {% if s.commission_type != 'Bonus'%}\n                {% set final = (vark.rt + varm.ct)%}\n            {% endif %}\n          {% endif %}\n          <b><span style=\"font-size:8px;\">Net Pay: {{'%0.2f'| format(final|float)}}</span></b>\n        </td>\n        </tr>\n       \n    </table>",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2023-07-06 11:44:09.191724",
 "modified_by": "support@dexciss.com",
 "module": "Milk Entry",
 "name": "Farmer Bill And DCS Wise Milk Ledger",
 "owner": "Administrator",
 "page_number": "Hide",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}